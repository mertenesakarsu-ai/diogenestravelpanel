import { useState } from "react";\nimport { Upload, AlertCircle, CheckCircle, XCircle, FileSpreadsheet, Search, Filter } from "lucide-react";\nimport { Button } from "@/components/ui/button";\nimport { Input } from "@/components/ui/input";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from "@/components/ui/select";\nimport { mockFlights } from "@/lib/mockFlightData";\n\nconst Flights = () => {\n  const [searchTerm, setSearchTerm] = useState("");\n  const [filterPNR, setFilterPNR] = useState("all");\n\n  const filteredFlights = mockFlights.filter(flight => {\n    const matchesSearch = flight.flightCode.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesPNR = filterPNR === "all" || \n                      (filterPNR === "with" && flight.hasPNR) ||\n                      (filterPNR === "without" && !flight.hasPNR);\n    return matchesSearch && matchesPNR;\n  });\n\n  const pendingTickets = mockFlights.filter(f => !f.hasPNR && f.daysUntilFlight <= 7);\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"flights-page\">\n      {/* Warning Panel */}\n      {pendingTickets.length > 0 && (\n        <div className=\"bg-red-50 border-l-4 border-red-500 p-6 rounded-xl\" data-testid=\"warning-panel\">\n          <div className=\"flex items-start gap-4\">\n            <div className=\"w-10 h-10 rounded-lg bg-red-500 flex items-center justify-center flex-shrink-0\">\n              <AlertCircle className=\"w-6 h-6 text-white\" />\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"text-lg font-bold text-red-800 mb-2\">Acil Uyar\u0131!</h3>\n              <p className=\"text-red-700\">\n                <strong>{pendingTickets.length}</strong> adet u\u00e7u\u015f i\u00e7in PNR eksik ve u\u00e7u\u015fa 7 g\u00fcnden az kald\u0131!\n              </p>\n              <div className=\"mt-3 space-y-1\">\n                {pendingTickets.map(flight => (\n                  <p key={flight.id} className=\"text-sm text-red-600\">\n                    • {flight.flightCode} - {flight.date} ({flight.daysUntilFlight} g\u00fcn kald\u0131)\n                  </p>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-xl p-6 border border-slate-200 shadow-sm\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg\">\n              <FileSpreadsheet className=\"w-7 h-7 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-slate-500\">Toplam U\u00e7u\u015f</p>\n              <p className=\"text-3xl font-bold text-slate-800\">{mockFlights.length}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-xl p-6 border border-slate-200 shadow-sm\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg\">\n              <CheckCircle className=\"w-7 h-7 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-slate-500\">PNR Mevcut</p>\n              <p className=\"text-3xl font-bold text-slate-800\">\n                {mockFlights.filter(f => f.hasPNR).length}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-xl p-6 border border-slate-200 shadow-sm\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center shadow-lg\">\n              <XCircle className=\"w-7 h-7 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-slate-500\">PNR Eksik</p>\n              <p className=\"text-3xl font-bold text-slate-800\">\n                {mockFlights.filter(f => !f.hasPNR).length}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-xl p-6 border border-slate-200 shadow-sm\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-lg\">\n              <AlertCircle className=\"w-7 h-7 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-slate-500\">Kritik (7g\u00fcn)</p>\n              <p className=\"text-3xl font-bold text-slate-800\">{pendingTickets.length}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Excel Upload Section */}\n      <div className=\"bg-white rounded-2xl border border-slate-200 shadow-lg p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h3 className=\"text-lg font-bold text-slate-800\">Excel / .bak Dosyas\u0131 Y\u00fckle</h3>\n            <p className=\"text-sm text-slate-500 mt-1\">U\u00e7u\u015f verilerini y\u00fckleyip kar\u015f\u0131la\u015ft\u0131r\u0131n</p>\n          </div>\n          <Button \n            className=\"bg-gradient-to-r from-cyan-500 to-teal-500 hover:from-cyan-600 hover:to-teal-600 text-white\"\n            data-testid=\"upload-excel-btn\"\n          >\n            <Upload className=\"w-4 h-4 mr-2\" />\n            Dosya Y\u00fckle\n          </Button>\n        </div>\n\n        <div className=\"border-2 border-dashed border-slate-300 rounded-xl p-12 text-center hover:border-cyan-400 transition-colors cursor-pointer\">\n          <Upload className=\"w-12 h-12 text-slate-400 mx-auto mb-4\" />\n          <p className=\"text-slate-600 font-medium mb-2\">Excel veya .bak dosyas\u0131n\u0131 s\u00fcr\u00fckleyin</p>\n          <p className=\"text-sm text-slate-500\">veya t\u0131klayarak se\u00e7in</p>\n        </div>\n      </div>\n\n      {/* Flights List */}\n      <div className=\"bg-white rounded-2xl border border-slate-200 shadow-lg p-6\">\n        <div className=\"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between mb-6\">\n          <h3 className=\"text-lg font-bold text-slate-800\">U\u00e7u\u015f Listesi</h3>\n          \n          <div className=\"flex flex-col sm:flex-row gap-3 w-full lg:w-auto\">\n            <div className=\"relative flex-1 lg:w-64\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n              <Input\n                placeholder=\"U\u00e7u\u015f kodu ara...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n                data-testid=\"flight-search\"\n              />\n            </div>\n            \n            <Select value={filterPNR} onValueChange={setFilterPNR}>\n              <SelectTrigger className=\"w-full sm:w-48\" data-testid=\"pnr-filter\">\n                <Filter className=\"w-4 h-4 mr-2\" />\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">T\u00fcm U\u00e7u\u015flar</SelectItem>\n                <SelectItem value=\"with\">PNR Mevcut</SelectItem>\n                <SelectItem value=\"without\">PNR Eksik</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\" data-testid=\"flights-table\">\n            <thead className=\"bg-slate-50 border-b border-slate-200\">\n              <tr>\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase\">U\u00e7u\u015f Kodu</th>\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase\">G\u00fczergah</th>\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase\">Tarih & Saat</th>\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase\">Y\u00f6n</th>\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase\">Yolcu</th>\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase\">PNR Durumu</th>\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase\">Kalan G\u00fcn</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-slate-100\">\n              {filteredFlights.map((flight) => (\n                <tr \n                  key={flight.id} \n                  className=\"hover:bg-slate-50 transition-colors\"\n                  data-testid={`flight-row-${flight.id}`}\n                >\n                  <td className=\"px-6 py-4\">\n                    <span className=\"font-semibold text-slate-800\">{flight.flightCode}</span>\n                  </td>\n                  <td className=\"px-6 py-4 text-slate-700\">\n                    {flight.from} → {flight.to}\n                  </td>\n                  <td className=\"px-6 py-4 text-slate-700\">\n                    {flight.date} • {flight.time}\n                  </td>\n                  <td className=\"px-6 py-4\">\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                      flight.direction === 'arrival' ? 'bg-green-100 text-green-800' : 'bg-orange-100 text-orange-800'\n                    }`}>\n                      {flight.direction === 'arrival' ? 'Geli\u015f' : 'Gidi\u015f'}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 text-slate-700\">{flight.passengers}</td>\n                  <td className=\"px-6 py-4\">\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                      flight.hasPNR ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                    }`}>\n                      {flight.hasPNR ? 'Mevcut' : 'Eksik'}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4\">\n                    <span className={`font-semibold ${\n                      flight.daysUntilFlight <= 3 ? 'text-red-600' :\n                      flight.daysUntilFlight <= 7 ? 'text-orange-600' :\n                      'text-slate-600'\n                    }`}>\n                      {flight.daysUntilFlight} g\u00fcn\n                    </span>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Flights;\n