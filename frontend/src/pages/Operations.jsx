import { useState } from "react";
import { Plane, Users, Truck, MapPin, Calendar } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { mockFlights, mockFlightDetails } from \"@/lib/mockFlightData\";\n\nconst Operations = () => {\n  const [selectedFlight, setSelectedFlight] = useState(null);\n  const [showDetails, setShowDetails] = useState(false);\n\n  const arrivals = mockFlights.filter(f => f.direction === \"arrival\");\n  const departures = mockFlights.filter(f => f.direction === \"departure\");\n\n  const handleFlightClick = (flight) => {\n    setSelectedFlight(flight);\n    setShowDetails(true);\n  };\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"operations-page\">\n      {/* Stats */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n        <div className=\"bg-white rounded-xl p-6 border border-slate-200 shadow-sm\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-lg\">\n              <Plane className=\"w-7 h-7 text-white\" style={{ transform: 'rotate(-45deg)' }} />\n            </div>\n            <div>\n              <p className=\"text-sm text-slate-500\">Bug\u00fcnk\u00fc Geli\u015fler</p>\n              <p className=\"text-3xl font-bold text-slate-800\">{arrivals.length}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-xl p-6 border border-slate-200 shadow-sm\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-lg\">\n              <Plane className=\"w-7 h-7 text-white\" style={{ transform: 'rotate(45deg)' }} />\n            </div>\n            <div>\n              <p className=\"text-sm text-slate-500\">Bug\u00fcnk\u00fc Gidi\u015fler</p>\n              <p className=\"text-3xl font-bold text-slate-800\">{departures.length}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-xl p-6 border border-slate-200 shadow-sm\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg\">\n              <Truck className=\"w-7 h-7 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-slate-500\">Aktif Transferler</p>\n              <p className=\"text-3xl font-bold text-slate-800\">12</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Flights Tabs */}\n      <div className=\"bg-white rounded-2xl border border-slate-200 shadow-lg p-6\">\n        <Tabs defaultValue=\"arrivals\" className=\"w-full\">\n          <TabsList className=\"grid w-full max-w-md grid-cols-2 mb-6\">\n            <TabsTrigger value=\"arrivals\" data-testid=\"arrivals-tab\">\n              <Plane className=\"w-4 h-4 mr-2\" style={{ transform: 'rotate(-45deg)' }} />\n              Geli\u015fler\n            </TabsTrigger>\n            <TabsTrigger value=\"departures\" data-testid=\"departures-tab\">\n              <Plane className=\"w-4 h-4 mr-2\" style={{ transform: 'rotate(45deg)' }} />\n              Gidi\u015fler\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"arrivals\" className=\"space-y-4\">\n            {arrivals.map((flight) => (\n              <div\n                key={flight.id}\n                className=\"p-4 rounded-xl border border-slate-200 hover:border-cyan-300 hover:bg-cyan-50 transition-all cursor-pointer\"\n                onClick={() => handleFlightClick(flight)}\n                data-testid={`arrival-flight-${flight.id}`}\n              >\n                <div className=\"flex flex-col lg:flex-row lg:items-center justify-between gap-4\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center\">\n                      <Plane className=\"w-6 h-6 text-white\" style={{ transform: 'rotate(-45deg)' }} />\n                    </div>\n                    <div>\n                      <p className=\"font-bold text-slate-800 text-lg\">{flight.flightCode}</p>\n                      <p className=\"text-sm text-slate-500\">{flight.from} → {flight.to}</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center gap-6\">\n                    <div>\n                      <p className=\"text-xs text-slate-500\">Tarih & Saat</p>\n                      <p className=\"font-semibold text-slate-800\">{flight.date} • {flight.time}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-xs text-slate-500\">Yolcu Say\u0131s\u0131</p>\n                      <p className=\"font-semibold text-slate-800\">{flight.passengers}</p>\n                    </div>\n                    <div>\n                      <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${\n                        flight.hasPNR ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                      }`}>\n                        {flight.hasPNR ? 'PNR OK' : 'PNR Eksik'}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </TabsContent>\n\n          <TabsContent value=\"departures\" className=\"space-y-4\">\n            {departures.map((flight) => (\n              <div\n                key={flight.id}\n                className=\"p-4 rounded-xl border border-slate-200 hover:border-orange-300 hover:bg-orange-50 transition-all cursor-pointer\"\n                onClick={() => handleFlightClick(flight)}\n                data-testid={`departure-flight-${flight.id}`}\n              >\n                <div className=\"flex flex-col lg:flex-row lg:items-center justify-between gap-4\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 rounded-lg bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center\">\n                      <Plane className=\"w-6 h-6 text-white\" style={{ transform: 'rotate(45deg)' }} />\n                    </div>\n                    <div>\n                      <p className=\"font-bold text-slate-800 text-lg\">{flight.flightCode}</p>\n                      <p className=\"text-sm text-slate-500\">{flight.from} → {flight.to}</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center gap-6\">\n                    <div>\n                      <p className=\"text-xs text-slate-500\">Tarih & Saat</p>\n                      <p className=\"font-semibold text-slate-800\">{flight.date} • {flight.time}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-xs text-slate-500\">Yolcu Say\u0131s\u0131</p>\n                      <p className=\"font-semibold text-slate-800\">{flight.passengers}</p>\n                    </div>\n                    <div>\n                      <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${\n                        flight.hasPNR ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                      }`}>\n                        {flight.hasPNR ? 'PNR OK' : 'PNR Eksik'}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </TabsContent>\n        </Tabs>\n      </div>\n\n      {/* Flight Details Dialog */}\n      <Dialog open={showDetails} onOpenChange={setShowDetails}>\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"text-2xl\">\n              U\u00e7u\u015f Detaylar\u0131: {selectedFlight?.flightCode}\n            </DialogTitle>\n          </DialogHeader>\n\n          {selectedFlight && mockFlightDetails[selectedFlight.id] && (\n            <div className=\"space-y-6 mt-4\">\n              {/* Passengers */}\n              <div>\n                <h3 className=\"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                  <Users className=\"w-5 h-5\" />\n                  Yolcular\n                </h3>\n                <div className=\"space-y-3\">\n                  {mockFlightDetails[selectedFlight.id].passengers.map((passenger, idx) => (\n                    <div key={idx} className=\"p-4 bg-slate-50 rounded-lg border border-slate-200\">\n                      <div className=\"flex justify-between items-start\">\n                        <div>\n                          <p className=\"font-semibold text-slate-800\">{passenger.name}</p>\n                          <p className=\"text-sm text-slate-500\">Voucher: {passenger.voucherNo}</p>\n                          <p className=\"text-sm text-slate-500\">Otel: {passenger.hotel}</p>\n                        </div>\n                        <span className=\"px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\">\n                          PNR: {passenger.pnr}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Transfers */}\n              <div>\n                <h3 className=\"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2\">\n                  <Truck className=\"w-5 h-5\" />\n                  Transferler\n                </h3>\n                <div className=\"space-y-3\">\n                  {mockFlightDetails[selectedFlight.id].transfers.map((transfer, idx) => (\n                    <div key={idx} className=\"p-4 bg-slate-50 rounded-lg border border-slate-200\">\n                      <div className=\"flex items-start gap-4\">\n                        <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center\">\n                          <Truck className=\"w-5 h-5 text-white\" />\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <MapPin className=\"w-4 h-4 text-slate-500\" />\n                            <p className=\"font-semibold text-slate-800\">{transfer.from} → {transfer.to}</p>\n                          </div>\n                          <div className=\"flex gap-4 text-sm text-slate-600\">\n                            <span>Saat: {transfer.time}</span>\n                            <span>•</span>\n                            <span>Ara\u00e7: {transfer.vehicle}</span>\n                            <span>•</span>\n                            <span>\u015eof\u00f6r: {transfer.driver}</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default Operations;\n